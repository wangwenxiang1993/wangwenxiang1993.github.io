<!doctype html>
<html>
<head>
    <link rel="shortcut icon" href="../source/img/favicon.ico"/>
    <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
    <script src="/js/jquery-1.7.1.min.js"></script>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
    <title>top&#39;blog</title>
</head>
<body>
<div id="info">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
<div id="photo">
    <div id="photo-span">
        <img src="/img/photo.png">
        <div><a href="/tags/index">top&#39;blog</a></div>
    </div>
</div>

<div id="guide">
    <div class="guide-button" id="guide-1" _href="/tags/project">project</div>
    <div class="guide-button" id="guide-2" _href="/tags/note">note</div>
    <div class="clear"></div>
    <div class="guide-button" id="guide-3" _href="/tags/life">life</div>
    <div class="guide-button" id="guide-4" _href="/categories/read">read</div>
</div>

<div id="second"></div>

<div id="link">
    <div><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;wangwenxiang1993@gmail.com</div><br>
    <div><a href="https://github.com/wangwenxiang1993" target="_blank"><i class="fa fa-github fa-lg" aria-hidden="true"></i>&nbsp;github</a></div><br>
    <div><i class="fa fa-weixin" aria-hidden="true"></i>&nbsp;187-0111-3061</div><br>
</div>

</div>
<div id="wrap">
    <section id="content">
    <article class="post">
        <div class="date">
    <span class="day">28</span>
    <span class="month">Dec</span>
    <span class="year">2016</span>
</div>
        <header>
            <h2><a href="/project/JAVA-pValue/" title="假设检验中的P值计算-JAVA">假设检验中的P值计算-JAVA</a></h2>
        </header>
        <div class="con"><script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

<h5 id="最近产品提出需求，对于ab实验，希望能够通过实验数据计算出P值，以对数据的准确性做一个直观判断。最开始不知道P值是一个什么概念，觉得应该很简单，baidu或者google以下应该会有很多开源的代码或者jar包；又或者是自己将P值公式实现便可。但是一番查找后发现没有想的这么简单，网络上对于P值得计算过程大多含糊不清，更别提完整的计算代码。最后没办法，只有通过自己拿起概率论书本重新进行学习，以下便记录自己从P值是什么到java实现的一些细节。"><a href="#最近产品提出需求，对于ab实验，希望能够通过实验数据计算出P值，以对数据的准确性做一个直观判断。最开始不知道P值是一个什么概念，觉得应该很简单，baidu或者google以下应该会有很多开源的代码或者jar包；又或者是自己将P值公式实现便可。但是一番查找后发现没有想的这么简单，网络上对于P值得计算过程大多含糊不清，更别提完整的计算代码。最后没办法，只有通过自己拿起概率论书本重新进行学习，以下便记录自己从P值是什么到java实现的一些细节。" class="headerlink" title="最近产品提出需求，对于ab实验，希望能够通过实验数据计算出P值，以对数据的准确性做一个直观判断。最开始不知道P值是一个什么概念，觉得应该很简单，baidu或者google以下应该会有很多开源的代码或者jar包；又或者是自己将P值公式实现便可。但是一番查找后发现没有想的这么简单，网络上对于P值得计算过程大多含糊不清，更别提完整的计算代码。最后没办法，只有通过自己拿起概率论书本重新进行学习，以下便记录自己从P值是什么到java实现的一些细节。"></a>最近产品提出需求，对于ab实验，希望能够通过实验数据计算出P值，以对数据的准确性做一个直观判断。最开始不知道P值是一个什么概念，觉得应该很简单，baidu或者google以下应该会有很多开源的代码或者jar包；又或者是自己将P值公式实现便可。但是一番查找后发现没有想的这么简单，网络上对于P值得计算过程大多含糊不清，更别提完整的计算代码。最后没办法，只有通过自己拿起概率论书本重新进行学习，以下便记录自己从P值是什么到java实现的一些细节。</h5><a id="more"></a>
<h2 id="1-统计学中P值"><a href="#1-统计学中P值" class="headerlink" title="1. 统计学中P值"></a>1. 统计学中P值</h2><h5 id="P值是指当假设为真时所得到的观察结果的概率，简单讲P值就是概率，反映某一事件发生的可能性大小。下面几个比较重要的基础概念对于理解P值的意义会有帮助。"><a href="#P值是指当假设为真时所得到的观察结果的概率，简单讲P值就是概率，反映某一事件发生的可能性大小。下面几个比较重要的基础概念对于理解P值的意义会有帮助。" class="headerlink" title="P值是指当假设为真时所得到的观察结果的概率，简单讲P值就是概率，反映某一事件发生的可能性大小。下面几个比较重要的基础概念对于理解P值的意义会有帮助。"></a>P值是指当假设为真时所得到的观察结果的概率，简单讲P值就是概率，反映某一事件发生的可能性大小。下面几个比较重要的基础概念对于理解P值的意义会有帮助。</h5><h3 id="1-1-概率论中几个比较重要的基础概念"><a href="#1-1-概率论中几个比较重要的基础概念" class="headerlink" title="1.1 概率论中几个比较重要的基础概念"></a>1.1 概率论中几个比较重要的基础概念</h3><h4 id="1-1-1-原假设与备择假设："><a href="#1-1-1-原假设与备择假设：" class="headerlink" title="1.1.1 原假设与备择假设："></a>1.1.1 原假设与备择假设：</h4><h5 id="原假设（H0）：通常将研究者想手机证据予以反对的假设称为原假设，用H0表示；"><a href="#原假设（H0）：通常将研究者想手机证据予以反对的假设称为原假设，用H0表示；" class="headerlink" title="原假设（H0）：通常将研究者想手机证据予以反对的假设称为原假设，用H0表示；"></a><strong>原假设（H<sub>0</sub>）</strong>：通常将研究者想手机证据予以反对的假设称为原假设，用H<sub>0</sub>表示；</h5><h5 id="备择假设（H1）：通常将研究者想收集证据予以支持的假设称为备择假设，或称研究假设，用H1活H2表示。"><a href="#备择假设（H1）：通常将研究者想收集证据予以支持的假设称为备择假设，或称研究假设，用H1活H2表示。" class="headerlink" title="备择假设（H1）：通常将研究者想收集证据予以支持的假设称为备择假设，或称研究假设，用H1活H2表示。"></a><strong>备择假设（H<sub>1</sub>）</strong>：通常将研究者想收集证据予以支持的假设称为备择假设，或称研究假设，用H<sub>1</sub>活H<sub>2</sub>表示。</h5><h5 id="举个栗子："><a href="#举个栗子：" class="headerlink" title="举个栗子："></a>举个栗子：</h5><div class="highlighter-rouge"><pre class="highlight"><code>某品牌洗涤剂在产品说明书中声称：平均净含量不少于500g。从消费者利益出发，有关研究人员要通过抽检其中的一批产品来验证该产品制造商的说明是否属实。<br>解：对于该洗涤剂的平均含量的真值为μ。如果抽检的结果发现μ<500，则表明该产品说明书中关于其净含量的内容是不真实的。一般来说，研究者抽检的意图是倾向于证实这种洗涤剂的平均净含量不符合说明书中的概述，因为这不符合说明书的陈述。如果研究者对于产品说明丝毫没有质疑，也就没有必要抽检了。所以μ<500是研究者想要收集证据支持的观点。 <h6="">H<sub>0</sub>:μ&gt;=500(净含量符合说明书);<h6>H<sub>1</sub>:μ<500(净含量不符合说明书)。< h6=""></500(净含量不符合说明书)。<></h6></500，则表明该产品说明书中关于其净含量的内容是不真实的。一般来说，研究者抽检的意图是倾向于证实这种洗涤剂的平均净含量不符合说明书中的概述，因为这不符合说明书的陈述。如果研究者对于产品说明丝毫没有质疑，也就没有必要抽检了。所以μ<500是研究者想要收集证据支持的观点。></code></pre></div>

<div class="highlighter-rouge"><pre class="highlight"><code>一家研究机构估计，某城市中家庭拥有汽车的比例超过30%。为了验证这一估计是否正确，该研究机构随机抽取了一个样本进行检验。<br>解：设该城市中家庭拥有汽车的比例真值为π。显然，研究者想收集证据予以支持的假设是”该城市中家庭拥有汽车的比例超过30%”。因此建立的原假设与备择假设应为<br><h6>H<sub>0</sub>:π&lt;=30%（家庭拥有汽车的比例不超过30%）；</h6><h6>H<sub>1</sub>:π&gt;30%（家庭拥有汽车的比例超过30%）。</h6></code></pre></div>

<ul>
<li>原假设和备择假设是一个完备事件组，而且互相对立。也就是说在一项假设检验中，必有且只有一个成立；</li>
<li>在假设检验中，等号”=”总是放在原假设上。   </li>
</ul>
<h4 id="1-1-2-单侧检验和双侧检验："><a href="#1-1-2-单侧检验和双侧检验：" class="headerlink" title="1.1.2 单侧检验和双侧检验："></a>1.1.2 单侧检验和双侧检验：</h4><h5 id="单侧检验：备择假设具有特定的方向性，并含有符号”-gt-”或”-lt-”的假设检验；"><a href="#单侧检验：备择假设具有特定的方向性，并含有符号”-gt-”或”-lt-”的假设检验；" class="headerlink" title="单侧检验：备择假设具有特定的方向性，并含有符号”&gt;”或”&lt;”的假设检验；"></a><strong>单侧检验</strong>：备择假设具有特定的方向性，并含有符号”&gt;”或”&lt;”的假设检验；</h5><h5 id="双侧检验：备择假设没有特定的方向性，并含有符号”≠”的假设检验。"><a href="#双侧检验：备择假设没有特定的方向性，并含有符号”≠”的假设检验。" class="headerlink" title="双侧检验：备择假设没有特定的方向性，并含有符号”≠”的假设检验。"></a><strong>双侧检验</strong>：备择假设没有特定的方向性，并含有符号”≠”的假设检验。</h5><p><img src="../../img/pvalue/pvalue1.png" alt="假设检验的基本形式">    </p>
<h3 id="1-2-两类错误与显著水平"><a href="#1-2-两类错误与显著水平" class="headerlink" title="1.2 两类错误与显著水平"></a>1.2 两类错误与显著水平</h3><h5 id="如前所述，原假设与备择假设不能同时成立，我们要么拒绝原假设，要么不拒绝原假设。我们希望的情况是：当原假设正确时没有拒绝它，当原假设不正确时拒绝它。但是我们无法保证不犯错。假设检验中过程中可能发生以下两类错误："><a href="#如前所述，原假设与备择假设不能同时成立，我们要么拒绝原假设，要么不拒绝原假设。我们希望的情况是：当原假设正确时没有拒绝它，当原假设不正确时拒绝它。但是我们无法保证不犯错。假设检验中过程中可能发生以下两类错误：" class="headerlink" title="如前所述，原假设与备择假设不能同时成立，我们要么拒绝原假设，要么不拒绝原假设。我们希望的情况是：当原假设正确时没有拒绝它，当原假设不正确时拒绝它。但是我们无法保证不犯错。假设检验中过程中可能发生以下两类错误："></a>如前所述，原假设与备择假设不能同时成立，我们要么拒绝原假设，要么不拒绝原假设。我们希望的情况是：当原假设正确时没有拒绝它，当原假设不正确时拒绝它。但是我们无法保证不犯错。假设检验中过程中可能发生以下两类错误：</h5><h5 id="I类错误：当原假设为真是拒绝原假设，所犯的错误称为第I类错误；"><a href="#I类错误：当原假设为真是拒绝原假设，所犯的错误称为第I类错误；" class="headerlink" title="I类错误：当原假设为真是拒绝原假设，所犯的错误称为第I类错误；"></a><strong>I类错误</strong>：当原假设为真是拒绝原假设，所犯的错误称为第I类错误；</h5><h5 id="II类错误：当原假设为假时没有拒绝原假设，所犯错误称为第II类错误。"><a href="#II类错误：当原假设为假时没有拒绝原假设，所犯错误称为第II类错误。" class="headerlink" title="II类错误：当原假设为假时没有拒绝原假设，所犯错误称为第II类错误。"></a><strong>II类错误</strong>：当原假设为假时没有拒绝原假设，所犯错误称为第II类错误。</h5><p><img src="../../img/pvalue/pvalue2.png" alt="假设检验的基本形式">   </p>
<h5 id="只有当原假设被拒绝时，我们才会犯第I类错误；只有当原假设未被拒绝时，我们才会犯第II类错误。因此，我们可以不犯第I类错误或不犯第II类错误，但不可能两类错误都不犯。两类错误就像一个跷跷板，当一个概率增大时，另一个减小。人们只能在两类错误的发生概率之间进行平衡。一般来说，发生哪一类错误的后果更为严重，就应该首要控制哪类错误发生的概率，但由于犯第I类错误的概率是可以又研究者控制的，因为此在假设检验中，人们往往先控制第I类错误的发生概率。"><a href="#只有当原假设被拒绝时，我们才会犯第I类错误；只有当原假设未被拒绝时，我们才会犯第II类错误。因此，我们可以不犯第I类错误或不犯第II类错误，但不可能两类错误都不犯。两类错误就像一个跷跷板，当一个概率增大时，另一个减小。人们只能在两类错误的发生概率之间进行平衡。一般来说，发生哪一类错误的后果更为严重，就应该首要控制哪类错误发生的概率，但由于犯第I类错误的概率是可以又研究者控制的，因为此在假设检验中，人们往往先控制第I类错误的发生概率。" class="headerlink" title="只有当原假设被拒绝时，我们才会犯第I类错误；只有当原假设未被拒绝时，我们才会犯第II类错误。因此，我们可以不犯第I类错误或不犯第II类错误，但不可能两类错误都不犯。两类错误就像一个跷跷板，当一个概率增大时，另一个减小。人们只能在两类错误的发生概率之间进行平衡。一般来说，发生哪一类错误的后果更为严重，就应该首要控制哪类错误发生的概率，但由于犯第I类错误的概率是可以又研究者控制的，因为此在假设检验中，人们往往先控制第I类错误的发生概率。"></a>只有当原假设被拒绝时，我们才会犯第I类错误；只有当原假设未被拒绝时，我们才会犯第II类错误。因此，我们可以不犯第I类错误或不犯第II类错误，但不可能两类错误都不犯。两类错误就像一个跷跷板，当一个概率增大时，另一个减小。人们只能在两类错误的发生概率之间进行平衡。一般来说，发生哪一类错误的后果更为严重，就应该首要控制哪类错误发生的概率，但由于犯第I类错误的概率是可以又研究者控制的，因为此在假设检验中，人们往往先控制第I类错误的发生概率。</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">发生第I类错误的概率常被用于度量检验结论的可靠性，并将这一概率称为显著性水平，记为α。</div></pre></td></tr></table></figure>
<h5 id="显著水平-是人们事先指定的犯第I类错误概率α的最大允许值。显著水平α越小，犯第I类错误的可能性自然就越小，但犯第II类错误的可能性则随之增大。作为一个普遍使用的原则，人们通常选择显著性水平为0-05或比0-05更小的概率。"><a href="#显著水平-是人们事先指定的犯第I类错误概率α的最大允许值。显著水平α越小，犯第I类错误的可能性自然就越小，但犯第II类错误的可能性则随之增大。作为一个普遍使用的原则，人们通常选择显著性水平为0-05或比0-05更小的概率。" class="headerlink" title="显著水平 是人们事先指定的犯第I类错误概率α的最大允许值。显著水平α越小，犯第I类错误的可能性自然就越小，但犯第II类错误的可能性则随之增大。作为一个普遍使用的原则，人们通常选择显著性水平为0.05或比0.05更小的概率。"></a><strong>显著水平</strong> 是人们事先指定的犯第I类错误概率α的最大允许值。显著水平α越小，犯第I类错误的可能性自然就越小，但犯第II类错误的可能性则随之增大。作为一个普遍使用的原则，人们通常选择显著性水平为0.05或比0.05更小的概率。</h5><h3 id="1-3-标准化检测量与拒绝域"><a href="#1-3-标准化检测量与拒绝域" class="headerlink" title="1.3 标准化检测量与拒绝域"></a>1.3 标准化检测量与拒绝域</h3><h5 id="检验统计量-实际上是总体参数的点估计量，但点估计量并不能直接作为检验的统计量，只有将其标准化后，才能用于度量它与原假设的参数之间的差异程度。实际上，假设检验中所用的检验统计量都是标准化检验统计量，它反映了点估计量（比如样本均值）与假设的总体参数（比如假设的总体均值）相比相差了多少个标准差。"><a href="#检验统计量-实际上是总体参数的点估计量，但点估计量并不能直接作为检验的统计量，只有将其标准化后，才能用于度量它与原假设的参数之间的差异程度。实际上，假设检验中所用的检验统计量都是标准化检验统计量，它反映了点估计量（比如样本均值）与假设的总体参数（比如假设的总体均值）相比相差了多少个标准差。" class="headerlink" title="检验统计量 实际上是总体参数的点估计量，但点估计量并不能直接作为检验的统计量，只有将其标准化后，才能用于度量它与原假设的参数之间的差异程度。实际上，假设检验中所用的检验统计量都是标准化检验统计量，它反映了点估计量（比如样本均值）与假设的总体参数（比如假设的总体均值）相比相差了多少个标准差。"></a><strong>检验统计量</strong> 实际上是总体参数的点估计量，但点估计量并不能直接作为检验的统计量，只有将其标准化后，才能用于度量它与原假设的参数之间的差异程度。实际上，假设检验中所用的检验统计量都是标准化检验统计量，它反映了点估计量（比如样本均值）与假设的总体参数（比如假设的总体均值）相比相差了多少个标准差。</h5><p>$$标准化检验统计量 = \frac{点估计量 - 假设值}{点估计量的抽样标准差}$$</p>
<h5 id="拒绝域-是由显著性水平α所围成的区域。如果利用样本观测结果计算出来的检验统计量的具体数值落在了拒绝域内，就拒绝原假设，否则就不拒绝原假设。"><a href="#拒绝域-是由显著性水平α所围成的区域。如果利用样本观测结果计算出来的检验统计量的具体数值落在了拒绝域内，就拒绝原假设，否则就不拒绝原假设。" class="headerlink" title="拒绝域 是由显著性水平α所围成的区域。如果利用样本观测结果计算出来的检验统计量的具体数值落在了拒绝域内，就拒绝原假设，否则就不拒绝原假设。"></a><strong>拒绝域</strong> 是由显著性水平α所围成的区域。如果利用样本观测结果计算出来的检验统计量的具体数值落在了拒绝域内，就拒绝原假设，否则就不拒绝原假设。</h5><p><img src="../../img/pvalue/pvalue3.jpeg" alt="显著性水平、拒绝域和临界值"></p>
<h2 id="2-JAVA实现P值计算"><a href="#2-JAVA实现P值计算" class="headerlink" title="2. JAVA实现P值计算"></a>2. JAVA实现P值计算</h2></div>
    </article>
</section>
<div class="clear"></div>
</div>
<script type="text/javascript" src="/js/base.js"></script>
</body>
</html>